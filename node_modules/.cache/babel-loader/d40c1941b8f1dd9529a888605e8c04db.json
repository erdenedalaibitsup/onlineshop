{"ast":null,"code":"import _toConsumableArray from\"/Users/User1/developer/onlineshop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/User1/developer/onlineshop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/User1/developer/onlineshop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from\"react\";import ProductAdd from\"../components/ProductAdd\";import ProductControl from\"../components/Control\";import{ProductContext}from'../../context/ProductCtx';import{validation}from'../../util/validator';import{sizeModel}from'../../localdata/product_size';import Resizer from'react-image-file-resizer';import css from'../dataTable/style.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Proudct=function Proudct(){var _jsx2;var ctx=React.useContext(ProductContext);var handleInputChange=function handleInputChange(event){var target=event.target;var value=target.value;var name=target.name;var type=target.type;var validationTypes={};if(type=='file'){if(event.target.files[0]){Resizer.imageFileResizer(event.target.files[0],500,500,'png',100,0,function(uri){// console.log(uri.split(',')[1])\nctx.setMainImage(uri);},'base64',200,200);}}var validate=validation(value,validationTypes[name]// name == \"id\" && ctx.types\n);var formValid=false;var product=_objectSpread(_objectSpread({},ctx.product),{},_defineProperty({},name,value));if(!validate.show){var istemvavlid=true;Object.values(product).map(function(el,index){if(el.length===0&&Object.keys(ctx.product)[index]!==[name]){istemvavlid=false;return;}});if(istemvavlid){formValid=true;}}var errorMsg=_objectSpread(_objectSpread({},ctx.errorMsg),{},_defineProperty({},name,validate));ctx.setProduct(product);ctx.setErrorMsg(errorMsg);ctx.setFormValid(formValid);};var updateButtonAction=function updateButtonAction(type){ctx.setType(_objectSpread(_objectSpread({},ctx.typeModel),type));ctx.setUpdateAction(true);ctx.setErrorMsg(ctx.errorModel);};var cancelButtonAction=function cancelButtonAction(){ctx.setProduct(ctx.product);ctx.setFormValid(false);ctx.setUpdateAction(false);ctx.setErrorMsg(ctx.errorModel);};var handleInputSize=function handleInputSize(event,index){var target=event.target;var value=target.value;var name=target.name;ctx.sizes[index][name]=value;ctx.setSizes(_toConsumableArray(ctx.sizes));};var removeSize=function removeSize(index){ctx.sizes.splice(index,1);ctx.setSizes(_toConsumableArray(ctx.sizes));};var addSize=function addSize(){ctx.sizes.push(_objectSpread({},sizeModel));ctx.setSizes(_toConsumableArray(ctx.sizes));};var stateEvent=function stateEvent(index){ctx.sizes[index].state=!ctx.sizes[index].state;ctx.setSizes(_toConsumableArray(ctx.sizes));};var selectSize=function selectSize(index){ctx.sizes[index].selected=!ctx.sizes[index].selected;ctx.setSizes(_toConsumableArray(ctx.sizes));};return/*#__PURE__*/_jsx(\"div\",{className:\"content-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"content-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row mb-2\",children:ctx.eventLoading?/*#__PURE__*/_jsx(\"div\",{className:css.loader}):/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(ProductAdd,{mainImage:ctx.mainImage,selectSize:selectSize,stateEvent:stateEvent,addSize:addSize,removeSize:removeSize,handleInputSize:handleInputSize,sizes:ctx.sizes,product:ctx.product,productTypes:ctx.productTypes,productSubTypes:ctx.productSubTypes,errorMsg:ctx.errorMsg,handleInputChange:handleInputChange}),/*#__PURE__*/_jsx(ProductControl,(_jsx2={formValid:ctx.formValid,updateAction:ctx.updateAction,setUpdateAction:ctx.setUpdateAction,cancelButtonAction:cancelButtonAction},_defineProperty(_jsx2,\"formValid\",ctx.formValid),_defineProperty(_jsx2,\"add\",ctx.addProduct),_jsx2))]})})})})})});};export default Proudct;","map":{"version":3,"sources":["/Users/User1/developer/onlineshop/src/pages/admin/content/ProductAddContent.js"],"names":["React","ProductAdd","ProductControl","ProductContext","validation","sizeModel","Resizer","css","Proudct","ctx","useContext","handleInputChange","event","target","value","name","type","validationTypes","files","imageFileResizer","uri","setMainImage","validate","formValid","product","show","istemvavlid","Object","values","map","el","index","length","keys","errorMsg","setProduct","setErrorMsg","setFormValid","updateButtonAction","setType","typeModel","setUpdateAction","errorModel","cancelButtonAction","handleInputSize","sizes","setSizes","removeSize","splice","addSize","push","stateEvent","state","selectSize","selected","eventLoading","loader","mainImage","productTypes","productSubTypes","updateAction","addProduct"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ProductAdd from \"../components/ProductAdd\";\nimport ProductControl from \"../components/Control\";\nimport { ProductContext } from '../../context/ProductCtx'\nimport { validation } from '../../util/validator'\nimport { sizeModel } from '../../localdata/product_size'\nimport Resizer from 'react-image-file-resizer';\nimport css from '../dataTable/style.module.css'\nconst Proudct = () => {\n\n  const ctx = React.useContext(ProductContext);\n  const handleInputChange = (event) => {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    const type = target.type;\n    const validationTypes = {\n\n    };\n    if (type == 'file') {\n      if (event.target.files[0]) {\n        Resizer.imageFileResizer(\n          event.target.files[0],\n          500,\n          500,\n          'png',\n          100,\n          0,\n          uri => {\n            // console.log(uri.split(',')[1])\n            ctx.setMainImage(uri);\n\n          },\n          'base64',\n          200,\n          200,\n        );\n\n      }\n    }\n    const validate = validation(\n      value,\n      validationTypes[name],\n      // name == \"id\" && ctx.types\n    );\n    let formValid = false;\n    const product = {\n      ...ctx.product,\n      [name]: value,\n    };\n    if (!validate.show) {\n      let istemvavlid = true;\n      Object.values(product).map((el, index) => {\n        if (\n          el.length === 0 &&\n          Object.keys(ctx.product)[index] !== [name]\n        ) {\n          istemvavlid = false;\n          return;\n        }\n      });\n      if (istemvavlid) {\n        formValid = true;\n      }\n    }\n    const errorMsg = {\n      ...ctx.errorMsg,\n      [name]: validate,\n    }\n\n\n    ctx.setProduct(product);\n    ctx.setErrorMsg(errorMsg);\n    ctx.setFormValid(formValid);\n  }\n\n  const updateButtonAction = (type) => {\n    ctx.setType({ ...ctx.typeModel, ...type });\n    ctx.setUpdateAction(true);\n    ctx.setErrorMsg(ctx.errorModel);\n\n  }\n\n  const cancelButtonAction = () => {\n    ctx.setProduct(ctx.product);\n    ctx.setFormValid(false);\n    ctx.setUpdateAction(false);\n    ctx.setErrorMsg(ctx.errorModel);\n  }\n  const handleInputSize = (event, index) => {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    ctx.sizes[index][name] = value;\n    ctx.setSizes([...ctx.sizes]);\n\n  }\n  const removeSize = (index) => {\n    ctx.sizes.splice(index, 1);\n    ctx.setSizes([...ctx.sizes]);\n  }\n  const addSize = () => {\n    ctx.sizes.push({ ...sizeModel });\n\n    ctx.setSizes([...ctx.sizes]);\n  };\n  const stateEvent = (index) => {\n    ctx.sizes[index].state = !ctx.sizes[index].state;\n\n    ctx.setSizes([...ctx.sizes]);\n  }\n\n  const selectSize = (index) => {\n    ctx.sizes[index].selected = !ctx.sizes[index].selected;\n\n    ctx.setSizes([...ctx.sizes]);\n  }\n\n  return (\n    <div className=\"content-wrapper\">\n      <div>\n        <div className=\"content-header\">\n          <div className=\"container-fluid\">\n            <div className=\"row mb-2\">\n\n              {ctx.eventLoading ? <div className={css.loader}></div> : <div className=\"col-12\">\n                <ProductAdd mainImage={ctx.mainImage} selectSize={selectSize} stateEvent={stateEvent} addSize={addSize} removeSize={removeSize} handleInputSize={handleInputSize} sizes={ctx.sizes} product={ctx.product} productTypes={ctx.productTypes} productSubTypes={ctx.productSubTypes} errorMsg={ctx.errorMsg} handleInputChange={handleInputChange} ></ProductAdd>\n                <ProductControl formValid={ctx.formValid} updateAction={ctx.updateAction} setUpdateAction={ctx.setUpdateAction}\n                  cancelButtonAction={cancelButtonAction}\n                  formValid={ctx.formValid} add={ctx.addProduct}></ProductControl>\n              </div>\n              }\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default Proudct;\n"]},"metadata":{},"sourceType":"module"}